<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card shadow">
        <div class="card-body text-center p-5">
          <div *ngIf="loading" class="my-4">
            <div class="spinner-border text-primary" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-3">Verifying your payment...</p>
          </div>

          <div *ngIf="!loading && paymentSuccess" class="payment-success">
            <div class="success-icon mb-4">
              <i class="bi bi-check-circle-fill text-success" style="font-size: 4rem;"></i>
            </div>
            <h2 class="mb-3">Payment Successful!</h2>
            <p class="lead mb-4">Thank you for your payment. Your order has been updated.</p>
            
            <div class="order-details mb-4" *ngIf="orderDetails">
              <div class="card bg-light">
                <div class="card-body">
                  <h5 class="card-title">Order Summary</h5>
                  <div class="row mt-3">
                    <div class="col-sm-6 text-start">Order Number:</div>
                    <div class="col-sm-6 text-end fw-bold">{{orderDetails.orderNumber || orderDetails.id}}</div>
                  </div>
                  <div class="row mt-2">
                    <div class="col-sm-6 text-start">Amount Paid:</div>
                    <div class="col-sm-6 text-end fw-bold">LKR {{orderDetails.totalPaid || orderDetails.lastPaymentAmount | number:'1.2-2'}}</div>
                  </div>
                  <div class="row mt-2">
                    <div class="col-sm-6 text-start">Payment Status:</div>
                    <div class="col-sm-6 text-end fw-bold">{{orderDetails.paymentStatus | titlecase}}</div>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="actions mt-4">
              <button class="btn btn-primary me-3" (click)="navigateToOrderDetails()">
                <i class="bi bi-file-earmark-text me-2"></i>View Order Details
              </button>
              <button class="btn btn-outline-primary" (click)="navigateToOrders()">
                <i class="bi bi-list me-2"></i>All Orders
              </button>
            </div>
          </div>

          <div *ngIf="!loading && !paymentSuccess" class="payment-error">
            <div class="error-icon mb-4">
              <i class="bi bi-exclamation-circle-fill text-danger" style="font-size: 4rem;"></i>
            </div>
            <h2 class="mb-3">Payment Verification Failed</h2>
            <p class="lead mb-4">{{errorMessage}}</p>
            <div class="actions mt-4">
              <button class="btn btn-primary" (click)="navigateToOrders()">
                <i class="bi bi-arrow-left me-2"></i>Back to Orders
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>